{% extends 'base.html' %} {% block content %}
<div class="container my-4">
  <h2 class="mb-4">{{ turf.name }}</h2>

  <div class="row">
    <div class="col-md-6">
      {% if turf.image %}
      <img
        src="{{ url_for('static', filename=turf.image) }}"
        class="img-fluid rounded"
        alt="{{ turf.name }}"
      />
      {% else %}
      <div
        class="bg-light rounded d-flex align-items-center justify-content-center"
        style="height: 300px"
      >
        <span class="text-muted">No image available</span>
      </div>
      {% endif %}
    </div>

    <div class="col-md-6">
      <h4>Details</h4>
      <p><strong>City:</strong> {{ turf.city or 'Not specified' }}</p>
      <p><strong>Address:</strong> {{ turf.address or 'Not specified' }}</p>
      <p><strong>Price:</strong> â‚¹{{ turf.price_per_hour }} per hour</p>
      {% if turf.description %}
      <p><strong>Description:</strong> {{ turf.description }}</p>
      {% endif %}
    </div>
  </div>

  <hr class="my-4" />

  <h4>Available Slots</h4>

  {% if slots %}
  <div class="row">
    {% for slot in slots %} {% if not slot.is_booked %}
    <div class="col-md-4 mb-3">
      <div class="card">
        <div class="card-body">
          <h6 class="card-title">{{ slot.date }}</h6>
          <p class="card-text">{{ slot.start_time }} - {{ slot.end_time }}</p>
          {% if current_user.is_authenticated and not current_user.is_owner %}
          <form
            method="post"
            action="{{ url_for('main.book_slot', slot_id=slot.id) }}"
          >
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <button type="submit" class="btn btn-success btn-sm">
              Book Now
            </button>
          </form>
          {% elif not current_user.is_authenticated %}
          <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-sm"
            >Login to Book</a
          >
          {% endif %}
        </div>
      </div>
    </div>
    {% endif %} {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">No available slots for this turf.</div>
  {% endif %}
</div>
{% endblock %}
